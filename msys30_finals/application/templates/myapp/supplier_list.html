{% extends 'myapp/base.html' %}
{% block title %}Suppliers{% endblock %}

{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">

    <a href="{% url 'supplier_list' %}" class="text-decoration-none text-dark">
        <h4 class="mb-0">SUPPLIERS</h4>
    </a>

    <div class="d-flex" style="gap: 10px;">

        <form method="GET" class="d-flex align-items-center" style="gap: 10px;">

            <!-- SORT DROPDOWN -->
            <select name="sort" class="form-select form-select-sm" 
                    onchange="this.form.submit()" 
                    style="width: 120px;">
                <option value="">Sort By</option>
                <option value="name" {% if sort_field == "name" %}selected{% endif %}>Name</option>
                <option value="contact_person" {% if sort_field == "contact_person" %}selected{% endif %}>
                    Contact Person
                </option>
            </select>

            <!-- UNIFIED SEARCH BAR -->
            <div class="d-flex align-items-center"
                 style="background: white; border-radius: 40px; padding: 6px 14px;
                        width: 380px; height: 38px; box-shadow: 0 1px 3px rgba(0,0,0,0.12);">

                <select name="search_field"
                        class="form-select border-0"
                        style="width: 120px; background: transparent; font-size: 14px;">
                    <option value="name" {% if selected_field == "name" %}selected{% endif %}>Name</option>
                    <option value="contact_person" {% if selected_field == "contact_person" %}selected{% endif %}>
                        Contact Person
                    </option>
                </select>

                <div style="width: 1px; height: 22px; background: #ccc; margin: 0 12px;"></div>

                <input type="text"
                       name="search_query"
                       class="form-control border-0"
                       style="font-size: 14px; background: transparent; box-shadow: none;"
                       placeholder="Search">

                <button type="submit" class="btn border-0">
                    <i class="bi bi-search" style="font-size: 18px; color: #b00056;"></i>
                </button>
            </div>

        </form>

        <a href="{% url 'add_supplier' %}" class="btn btn-success btn-sm">
            + Add Supplier
        </a>

    </div>
</div>


<div class="table-responsive" style="max-height: 700px; overflow-y: auto;">
  <table class="table table-striped table-hover shadow-sm">
      <thead class="table-dark">
          <tr>
              <th>Name</th>
              <th>Contact Person</th>
              <th>Phone</th>
              <th>Email</th>
              <th>Address</th>
              <th>Actions</th>
          </tr>
      </thead>

      <tbody>
          {% for s in suppliers %}
          <tr>
              <td>{{ s.name }}</td>
              <td>{{ s.contact_person }}</td>
              <td>{{ s.phone }}</td>
              <td>{{ s.email }}</td>
              <td>{{ s.address }}</td>
              <td>
                  <a href="{% url 'edit_supplier' s.id %}" class="btn btn-sm btn-primary">Edit</a>
                  <a href="{% url 'delete_supplier' s.id %}" class="btn btn-sm btn-danger">Delete</a>
              </td>
          </tr>
          {% empty %}
          <tr>
              <td colspan="6" class="text-center text-muted py-3">
                  No suppliers available.
              </td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
</div>

{% endblock %}
