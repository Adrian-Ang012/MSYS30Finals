{% extends 'myapp/base.html' %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">

    <a href="{% url 'inventory_list' %}" class="text-decoration-none text-dark">
        <h4 class="mb-0">INVENTORY</h4>
    </a>

    <div class="d-flex" style="gap: 10px;">

        <form method="GET" class="d-flex align-items-center" style="gap: 10px;">

            <!-- SORT DROPDOWN -->
            <select name="sort" class="form-select form-select-sm" onchange="this.form.submit()" style="width: 120px;">
                <option value="" >Sort By</option>
                <option value="sku" {% if sort_field == "sku" %}selected{% endif %}>SKU</option>
                <option value="name" {% if sort_field == "name" %}selected{% endif %}>Name</option>
                <option value="category" {% if sort_field == "category" %}selected{% endif %}>Category</option>
                <option value="quantity" {% if sort_field == "quantity" %}selected{% endif %}>Quantity</option>
                <option value="reorder" {% if sort_field == "reorder" %}selected{% endif %}>Reorder Level</option>
                <option value="price" {% if sort_field == "price" %}selected{% endif %}>Unit Price</option>
                <option value="supplier" {% if sort_field == "supplier" %}selected{% endif %}>Supplier</option>
            </select>

            <!-- SEARCH BAR -->
            <div class="d-flex align-items-center"
                style="background: white; border-radius: 40px; padding: 6px 14px;
                       width: 380px; height: 38px; box-shadow: 0 1px 3px rgba(0,0,0,0.12);">

                <!-- SEARCH FIELD DROPDOWN -->
                <select name="search_field"
                        class="form-select border-0"
                        style="width: 120px; background: transparent; font-size: 14px;">
                    <option value="sku" {% if selected_field == "sku" %}selected{% endif %}>SKU</option>
                    <option value="name" {% if selected_field == "name" %}selected{% endif %}>Name</option>
                    <option value="category" {% if selected_field == "category" %}selected{% endif %}>Category</option>
                    <option value="supplier" {% if selected_field == "supplier" %}selected{% endif %}>Supplier</option>
                </select>

                <div style="width: 1px; height: 22px; background: #ccc; margin: 0 12px;"></div>

                <!-- SEARCH INPUT -->
                <input type="text"
                       name="search_query"
                       class="form-control border-0"
                       style="font-size: 14px; background: transparent; box-shadow: none;"
                       placeholder="Search">
                <button type="submit" class="btn border-0">
                    <i class="bi bi-search" style="font-size: 18px; color: #b00056;"></i>
                </button>
            </div>

        </form>

        <a href="{% url 'add_product' %}" class="btn btn-success btn-sm">
            + Add Product
        </a>

    </div>
</div>

<div class="table-responsive" style="max-height: 700px; overflow-y: auto;">
    <table class="table table-striped table-hover shadow-sm">
        <thead class="table-dark">
            <tr>
                <th>SKU</th>
                <th>Name</th>
                <th>Category</th>
                <th>Quantity</th>
                <th>Reorder Level</th>
                <th>Unit Price</th>
                <th>Supplier</th>
                <th>Actions</th>
            </tr>
        </thead>

        <tbody>
            {% for p in products %}
            <tr>
                <td>{{ p.sku }}</td>
                <td>{{ p.name }}</td>
                <td>{{ p.category }}</td>
                <td>{{ p.quantity }}</td>
                <td>{{ p.reorder_level }}</td>
                <td>{{ p.unit_price }}</td>
                <td>{{ p.supplier }}</td>
                <td>
                    <a href="{% url 'edit_product' p.id %}" class="btn btn-sm btn-primary">Edit</a>
                    <a href="{% url 'delete_product' p.id %}" class="btn btn-sm btn-danger">Delete</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="8" class="text-center text-muted py-3">No products found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
